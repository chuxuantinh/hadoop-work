<div class="b-create-service-wizard">
    <div class="b-create-service-wizard__steps" ng-if="currentStep">
        <dap-widget class="b-create-service-wizard__steps__include-container" name="currentStep.widgetName"
                    params="{data: sharedData, stepNumber: currentStepNumber, showValidationErrors: showValidationErrors}">

            <div class="b-create-service-wizard-step">
                <div class="b-dashboard-plugin-widget-backdrop">
                    <div class="b-dashboard-plugin-widget-backdrop__spinner">
                        <div class="b-dashboard-plugin-widget-backdrop__spinner__top"></div>
                        <div class="b-dashboard-plugin-widget-backdrop__spinner__bottom"></div>
                    </div>
                </div>
            </div>

        </dap-widget>
        <div class="b-create-service-wizard__steps__buttons">
            <button class="btn btn-secondary btn-lg" ng-click="prevStep()"
                    ng-disabled="currentStepNumber === 1 || currentStep.isDisabled()">
                Prev Step
            </button>
            <button class="btn btn-default btn-lg" ng-click="nextStep()" ng-disabled="currentStep.isDisabled()"
                    ng-hide="currentStep.isLastStep">
                Next Step
            </button>
            <button class="btn btn-default btn-lg" ng-click="save()" ng-show="currentStep.readyToDeploy()"
                    ng-disabled="currentStep.isDisabled() || !currentStep.isCompleted()"
                    focus-it="true">
                Deploy
            </button>
        </div>
    </div>

    <div class="b-create-service-wizard__status-panel">
        <ul class="list-unstyled b-create-service-wizard__status-list">
            <li ng-repeat="s in steps" ng-show="steps.indexOf(currentStep) >= $index && !s.isLastStep"
                ng-class="{'b-create-service-wizard__status-panel__status-line_completed': s.isCompleted()}"
                class="b-create-service-wizard__status-panel__status-line">
                <span class="b-create-service-wizard__status-panel__status-line__key">{{key($index)}}</span>
                <span class="b-create-service-wizard__status-panel__status-line__value">{{s.status()}}</span>
            </li>
        </ul>

        <div class="b-create-service-wizard__status-panel__buttons">
            <button class="btn btn-secondary btn-lg" ng-click="cancelDeploy()">Cancel</button>
        </div>
    </div>

    <div class="b-oozie-plugin-widget-backdrop" ng-show="isLoading">
        <div class="b-oozie-plugin-widget-backdrop__spinner">
            <dap-widget name="'css-loader'" ></dap-widget>
        </div>
    </div>
</div>
